<?php

declare(strict_types=1);

namespace Mittwald\ApiClient\Generated\V2\Clients\License;

use GuzzleHttp\Client;
use GuzzleHttp\Exception\GuzzleException;
use GuzzleHttp\Psr7\Request;
use Mittwald\ApiClient\Error\UnexpectedResponseException;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseBadRequestResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseDefaultResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseForbiddenResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseInternalServerErrorResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseNotFoundResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseOKResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseRequest;
use Mittwald\ApiClient\Generated\V2\Clients\License\GetLicense\GetLicenseTooManyRequestsResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectBadRequestResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectDefaultResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectForbiddenResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectInternalServerErrorResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectOKResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectRequest;
use Mittwald\ApiClient\Generated\V2\Clients\License\ListLicensesForProject\ListLicensesForProjectTooManyRequestsResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyBadRequestResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyDefaultResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyForbiddenResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyInternalServerErrorResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyNotFoundResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyOKResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyPreconditionFailedResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyRequest;
use Mittwald\ApiClient\Generated\V2\Clients\License\RotateLicenseKey\RotateLicenseKeyTooManyRequestsResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectBadRequestResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectDefaultResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectForbiddenResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectInternalServerErrorResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectNotFoundResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectOKResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectPreconditionFailedResponse;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectRequest;
use Mittwald\ApiClient\Generated\V2\Clients\License\ValidateLicenseKeyForProject\ValidateLicenseKeyForProjectTooManyRequestsResponse;

/**
 * Client for License API
 *
 * The license API allows you to manage your paid licenses.
 *
 * DO NOT EDIT; this class was generated by the mittwald/api-client-builder package
 * (https://github.com/mittwald/api-client-php-builder). Please make any changes
 * there.
 *
 * @generated
 * @see https://github.com/mittwald/api-client-php-builder
 */
class LicenseClientImpl implements LicenseClient
{
    private Client $client;

    public function __construct(Client $client)
    {
        $this->client = $client;
    }

    /**
     * Get a license.
     *
     * @see https://developer.mittwald.de/reference/v2/#tag/License/operation/license-get-license
     * @throws GuzzleException
     * @throws UnexpectedResponseException
     * @param GetLicenseRequest $request An object representing the request for this operation
     * @return GetLicenseOKResponse OK
     */
    public function getLicense(GetLicenseRequest $request): GetLicenseOKResponse
    {
        $httpRequest = new Request(GetLicenseRequest::method, $request->buildUrl());
        $httpResponse = $this->client->send($httpRequest, $request->buildRequestOptions());
        if ($httpResponse->getStatusCode() === 200) {
            return GetLicenseOKResponse::fromResponse($httpResponse);
        }
        throw new UnexpectedResponseException(match ($httpResponse->getStatusCode()) {
            400 => GetLicenseBadRequestResponse::fromResponse($httpResponse),
            403 => GetLicenseForbiddenResponse::fromResponse($httpResponse),
            404 => GetLicenseNotFoundResponse::fromResponse($httpResponse),
            429 => GetLicenseTooManyRequestsResponse::fromResponse($httpResponse),
            500 => GetLicenseInternalServerErrorResponse::fromResponse($httpResponse),
            default => GetLicenseDefaultResponse::fromResponse($httpResponse),
        });
    }

    /**
     * List Licenses belonging to a Project.
     *
     * @see https://developer.mittwald.de/reference/v2/#tag/License/operation/license-list-licenses-for-project
     * @throws GuzzleException
     * @throws UnexpectedResponseException
     * @param ListLicensesForProjectRequest $request An object representing the request for this operation
     * @return ListLicensesForProjectOKResponse OK
     */
    public function listLicensesForProject(ListLicensesForProjectRequest $request): ListLicensesForProjectOKResponse
    {
        $httpRequest = new Request(ListLicensesForProjectRequest::method, $request->buildUrl());
        $httpResponse = $this->client->send($httpRequest, $request->buildRequestOptions());
        if ($httpResponse->getStatusCode() === 200) {
            return ListLicensesForProjectOKResponse::fromResponse($httpResponse);
        }
        throw new UnexpectedResponseException(match ($httpResponse->getStatusCode()) {
            400 => ListLicensesForProjectBadRequestResponse::fromResponse($httpResponse),
            403 => ListLicensesForProjectForbiddenResponse::fromResponse($httpResponse),
            429 => ListLicensesForProjectTooManyRequestsResponse::fromResponse($httpResponse),
            500 => ListLicensesForProjectInternalServerErrorResponse::fromResponse($httpResponse),
            default => ListLicensesForProjectDefaultResponse::fromResponse($httpResponse),
        });
    }

    /**
     * rotate a License's key, i.e. revoke the old and generate a new one.
     *
     * @see https://developer.mittwald.de/reference/v2/#tag/License/operation/license-rotate-license-key
     * @throws GuzzleException
     * @throws UnexpectedResponseException
     * @param RotateLicenseKeyRequest $request An object representing the request for this operation
     * @return RotateLicenseKeyOKResponse OK
     */
    public function rotateLicenseKey(RotateLicenseKeyRequest $request): RotateLicenseKeyOKResponse
    {
        $httpRequest = new Request(RotateLicenseKeyRequest::method, $request->buildUrl());
        $httpResponse = $this->client->send($httpRequest, $request->buildRequestOptions());
        if ($httpResponse->getStatusCode() === 200) {
            return RotateLicenseKeyOKResponse::fromResponse($httpResponse);
        }
        throw new UnexpectedResponseException(match ($httpResponse->getStatusCode()) {
            400 => RotateLicenseKeyBadRequestResponse::fromResponse($httpResponse),
            403 => RotateLicenseKeyForbiddenResponse::fromResponse($httpResponse),
            404 => RotateLicenseKeyNotFoundResponse::fromResponse($httpResponse),
            412 => RotateLicenseKeyPreconditionFailedResponse::fromResponse($httpResponse),
            429 => RotateLicenseKeyTooManyRequestsResponse::fromResponse($httpResponse),
            500 => RotateLicenseKeyInternalServerErrorResponse::fromResponse($httpResponse),
            default => RotateLicenseKeyDefaultResponse::fromResponse($httpResponse),
        });
    }

    /**
     * Validate a License's key for a project.
     *
     * @see https://developer.mittwald.de/reference/v2/#tag/License/operation/license-validate-license-key-for-project
     * @throws GuzzleException
     * @throws UnexpectedResponseException
     * @param ValidateLicenseKeyForProjectRequest $request An object representing the request for this operation
     * @return ValidateLicenseKeyForProjectOKResponse OK
     */
    public function validateLicenseKeyForProject(ValidateLicenseKeyForProjectRequest $request): ValidateLicenseKeyForProjectOKResponse
    {
        $httpRequest = new Request(ValidateLicenseKeyForProjectRequest::method, $request->buildUrl());
        $httpResponse = $this->client->send($httpRequest, $request->buildRequestOptions());
        if ($httpResponse->getStatusCode() === 200) {
            return ValidateLicenseKeyForProjectOKResponse::fromResponse($httpResponse);
        }
        throw new UnexpectedResponseException(match ($httpResponse->getStatusCode()) {
            400 => ValidateLicenseKeyForProjectBadRequestResponse::fromResponse($httpResponse),
            403 => ValidateLicenseKeyForProjectForbiddenResponse::fromResponse($httpResponse),
            404 => ValidateLicenseKeyForProjectNotFoundResponse::fromResponse($httpResponse),
            412 => ValidateLicenseKeyForProjectPreconditionFailedResponse::fromResponse($httpResponse),
            429 => ValidateLicenseKeyForProjectTooManyRequestsResponse::fromResponse($httpResponse),
            500 => ValidateLicenseKeyForProjectInternalServerErrorResponse::fromResponse($httpResponse),
            default => ValidateLicenseKeyForProjectDefaultResponse::fromResponse($httpResponse),
        });
    }
}
